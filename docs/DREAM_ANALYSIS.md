# DREAM_ANALYSIS - –°–∏—Å—Ç–µ–º–∞ –∞–Ω–∞–ª–∏–∑–∞ —Å–Ω–æ–≤

> **Summary:** PsyDream –∏—Å–ø–æ–ª—å–∑—É–µ—Ç 4-—à–∞–≥–æ–≤—ã–π Wizard –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Å–Ω–æ–≤ —á–µ—Ä–µ–∑ –ª—é–±–æ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω–æ–≥–æ AI –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç 6 –º–µ—Ç–æ–¥–æ–≤ –ø—Å–∏—Ö–æ–∞–Ω–∞–ª–∏–∑–∞ –∏ –¥–≤—É—Ö—ç—Ç–∞–ø–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ —Ä–∞–∑–±–æ—Ä–∞ —Å–∏–º–≤–æ–ª–æ–≤.

---

## ‚ö†Ô∏è –í–ê–ñ–ù–û: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

–ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ —Å–∏—Å—Ç–µ–º–µ –∞–Ω–∞–ª–∏–∑–∞ —Å–Ω–æ–≤ **–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û** –æ–±–Ω–æ–≤–ª—è–π —ç—Ç–æ—Ç —Ñ–∞–π–ª –∏ [CLAUDE.md](../CLAUDE.md).

**–ß—Ç–æ —Ç—Ä–µ–±—É–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:**
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –º–µ—Ç–æ–¥–æ–≤ –ø—Å–∏—Ö–æ–∞–Ω–∞–ª–∏–∑–∞
- –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ DreamData –∏–ª–∏ AnalysisResponse
- –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ Wizard steps
- –ù–æ–≤—ã–µ –ø–æ–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
- –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ø—Ä–æ–º–ø—Ç–∞—Ö –¥–ª—è AI

---

## üßô Wizard Flow (4 —à–∞–≥–∞)

### –û–±–∑–æ—Ä

```
Step 1: DreamForm          ‚Üí –û–ø–∏—Å–∞–Ω–∏–µ —Å–Ω–∞ (textarea)
Step 2: ContextForm        ‚Üí –ö–æ–Ω—Ç–µ–∫—Å—Ç (8 –ø–æ–ª–µ–π)
Step 3: MethodSelector     ‚Üí –í—ã–±–æ—Ä –º–µ—Ç–æ–¥–∞ –∞–Ω–∞–ª–∏–∑–∞
Step 4: AnalysisResult     ‚Üí –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞
```

**–§–∞–π–ª:** [App.tsx](../App.tsx) (renderWizardStep function)

---

## üìã Step 1: DreamForm

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç:** [components/DreamForm.tsx](../components/DreamForm.tsx)

**–ü–æ–ª–µ:**
- `description` (string) - –¢–µ–∫—Å—Ç–æ–≤–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å–Ω–∞

**–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞:** 10 —Å–∏–º–≤–æ–ª–æ–≤

**–ü—Ä–∏–º–µ—Ä:**

```typescript
{
  description: "–Ø –≤–∏–¥–µ–ª —Å–æ–Ω, –≥–¥–µ —è –ª–µ—Ç–∞–ª –Ω–∞–¥ –≥–æ—Ä–æ–¥–æ–º. –ë—ã–ª–æ –æ—â—É—â–µ–Ω–∏–µ –ª–µ–≥–∫–æ—Å—Ç–∏ –∏ —Å–≤–æ–±–æ–¥—ã. –ù–µ–±–æ –±—ã–ª–æ —è—Ä–∫–æ-—Å–∏–Ω–∏–º, –∏ —è –º–æ–≥ —É–ø—Ä–∞–≤–ª—è—Ç—å –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –ø–æ–ª—ë—Ç–∞ –æ–¥–Ω–æ–π –ª–∏—à—å –º—ã—Å–ª—å—é..."
}
```

---

## üéØ Step 2: ContextForm

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç:** [components/ContextForm.tsx](../components/ContextForm.tsx)

**8 –ø–æ–ª–µ–π –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞:**

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|----------|
| `emotion` | string | –≠–º–æ—Ü–∏—è –ø—Ä–∏ –ø—Ä–æ–±—É–∂–¥–µ–Ω–∏–∏ (–≤—ã–±–æ—Ä –∏–∑ —Å–ø–∏—Å–∫–∞) |
| `lifeSituation` | string | –¢–µ–∫—É—â–∞—è –∂–∏–∑–Ω–µ–Ω–Ω–∞—è —Å–∏—Ç—É–∞—Ü–∏—è |
| `associations` | string | –ê—Å—Å–æ—Ü–∏–∞—Ü–∏–∏ —Å–æ —Å–Ω–æ–º |
| `recurring` | boolean | –ü–æ–≤—Ç–æ—Ä—è—é—â–∏–π—Å—è –ª–∏ —Å–æ–Ω |
| `dayResidue` | string | –û—Å—Ç–∞—Ç–æ–∫ –¥–Ω—è (—á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–æ –Ω–∞–∫–∞–Ω—É–Ω–µ) |
| `characterType` | string | –¢–∏–ø—ã –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π –≤–æ —Å–Ω–µ |
| `dreamRole` | string | –†–æ–ª—å —Å–Ω–æ–≤–∏–¥—Ü–∞ (–∞–∫—Ç–∏–≤–Ω–∞—è/–ø–∞—Å—Å–∏–≤–Ω–∞—è/–Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—å) |
| `physicalSensation` | string | –§–∏–∑–∏—á–µ—Å–∫–∏–µ –æ—â—É—â–µ–Ω–∏—è |

**–ü—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —ç–º–æ—Ü–∏–∏:** (—Å–º. [constants.ts](../constants.ts:61-63))

```typescript
export const PREBUILT_EMOTIONS = [
  "–¢—Ä–µ–≤–æ–≥–∞/–°—Ç—Ä–∞—Ö",
  "–†–∞–¥–æ—Å—Ç—å/–≠–∫—Å—Ç–∞–∑",
  "–ó–∞–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–æ",
  "–ì—Ä—É—Å—Ç—å/–ì–æ—Ä–µ",
  "–ì–Ω–µ–≤",
  "–ü–æ–∫–æ–π/–û–±–ª–µ–≥—á–µ–Ω–∏–µ",
  "–°—Ç—ã–¥/–í–∏–Ω–∞"
];
```

**–ü—Ä–∏–º–µ—Ä:**

```typescript
{
  emotion: "–†–∞–¥–æ—Å—Ç—å/–≠–∫—Å—Ç–∞–∑",
  lifeSituation: "–ù–µ–¥–∞–≤–Ω–æ —Å–º–µ–Ω–∏–ª —Ä–∞–±–æ—Ç—É, –Ω–∞—á–∞–ª –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç",
  associations: "–°–≤–æ–±–æ–¥–∞, –ø–æ–ª—ë—Ç, –¥–µ—Ç—Å—Ç–≤–æ",
  recurring: false,
  dayResidue: "–°–º–æ—Ç—Ä–µ–ª –¥–æ–∫—É–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π —Ñ–∏–ª—å–º –ø—Ä–æ –ø—Ç–∏—Ü",
  characterType: "–ù–µ–∑–Ω–∞–∫–æ–º—ã–µ –ª—é–¥–∏",
  dreamRole: "–ê–∫—Ç–∏–≤–Ω—ã–π —É—á–∞—Å—Ç–Ω–∏–∫",
  physicalSensation: "–õ—ë–≥–∫–æ—Å—Ç—å, –æ—â—É—â–µ–Ω–∏–µ –Ω–µ–≤–µ—Å–æ–º–æ—Å—Ç–∏"
}
```

---

## üî¨ Step 3: MethodSelector

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç:** [components/MethodSelector.tsx](../components/MethodSelector.tsx)

### 6 –º–µ—Ç–æ–¥–æ–≤ –ø—Å–∏—Ö–æ–∞–Ω–∞–ª–∏–∑–∞

**Enum:** [types.ts](../types.ts:2-9)

```typescript
export enum PsychMethod {
  AUTO = 'auto',               // AI –≤—ã–±–∏—Ä–∞–µ—Ç –ø–æ–¥—Ö–æ–¥
  JUNGIAN = 'jungian',         // –Æ–Ω–≥–∏–∞–Ω—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑
  FREUDIAN = 'freudian',       // –§—Ä–µ–π–¥–∏—Å—Ç—Å–∫–∏–π –ø—Å–∏—Ö–æ–∞–Ω–∞–ª–∏–∑
  GESTALT = 'gestalt',         // –ì–µ—à—Ç–∞–ª—å—Ç-—Ç–µ—Ä–∞–ø–∏—è
  COGNITIVE = 'cognitive',     // –ö–æ–≥–Ω–∏—Ç–∏–≤–Ω–∞—è –ø—Å–∏—Ö–æ–ª–æ–≥–∏—è (CBT)
  EXISTENTIAL = 'existential'  // –≠–∫–∑–∏—Å—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥
}
```

**–ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –º–µ—Ç–æ–¥–æ–≤:** [constants.ts](../constants.ts:4-59)

```typescript
export const PSYCH_METHODS = [
  {
    id: PsychMethod.AUTO,
    name: '–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è –ò–ò',
    description: '–ü–æ–∑–≤–æ–ª—å—Ç–µ –ò–ò –≤—ã–±—Ä–∞—Ç—å –ª—É—á—à—É—é –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫—É—é –∫–æ–Ω—Ü–µ–ø—Ü–∏—é –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤–∞—à–µ–≥–æ —Å–Ω–∞.',
    icon: Sparkles,
    color: 'text-purple-300',
    bgColor: 'bg-purple-900/30',
    borderColor: 'border-purple-500/30'
  },
  {
    id: PsychMethod.JUNGIAN,
    name: '–Æ–Ω–≥–∏–∞–Ω—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑',
    description: '–§–æ–∫—É—Å –Ω–∞ –∞—Ä—Ö–µ—Ç–∏–ø–∞—Ö, –∫–æ–ª–ª–µ–∫—Ç–∏–≤–Ω–æ–º –±–µ—Å—Å–æ–∑–Ω–∞—Ç–µ–ª—å–Ω–æ–º –∏ –ø—É—Ç–∏ –∫ –∏–Ω–¥–∏–≤–∏–¥—É–∞—Ü–∏–∏.',
    icon: Layers,
    color: 'text-indigo-300',
    bgColor: 'bg-indigo-900/30',
    borderColor: 'border-indigo-500/30'
  },
  // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã
];
```

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç AUTO:**
AI –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Å–æ–Ω –∏ –≤—ã–±–∏—Ä–∞–µ—Ç –Ω–∞–∏–±–æ–ª–µ–µ –ø–æ–¥—Ö–æ–¥—è—â–∏–π –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –ø–æ–¥—Ö–æ–¥, —è–≤–Ω–æ —É–∫–∞–∑—ã–≤–∞—è –≤ –æ—Ç–≤–µ—Ç–µ, –∫–∞–∫–æ–π –º–µ—Ç–æ–¥ –±—ã–ª –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω.

---

## ü§ñ Step 4: AI –ê–Ω–∞–ª–∏–∑ (Two-Stage Process)

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç:** [components/AnalysisResult.tsx](../components/AnalysisResult.tsx)

### –î–≤—É—Ö—ç—Ç–∞–ø–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å

**‚ö†Ô∏è –í–ê–ñ–ù–û:** –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∞–Ω–∞–ª–∏–∑–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ **–∞–∫—Ç–∏–≤–Ω–æ–≥–æ AI –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –¥–ª—è —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –∑–∞–¥–∞—á**, –∞ –ù–ï —á–µ—Ä–µ–∑ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –º–æ–¥–µ–ª—å —Ç–∏–ø–∞ Gemini. –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã –º–æ–≥—É—Ç –≤—ã–±—Ä–∞—Ç—å –ª—é–±–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ (OpenAI, Claude, Gemini, AiTunnel, NeuroAPI) –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏.

#### Stage 1: –û—Å–Ω–æ–≤–Ω–æ–π –∞–Ω–∞–ª–∏–∑ + –Ω–∞–∑–≤–∞–Ω–∏—è —Å–∏–º–≤–æ–ª–æ–≤

**–û–¥–∏–Ω –∑–∞–ø—Ä–æ—Å** –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
- `summary` - –ö—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ (2-3 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è)
- `analysis` - –ì–ª—É–±–æ–∫–∏–π –∞–Ω–∞–ª–∏–∑ (4-5 –±–ª–æ–∫–æ–≤ —Å Markdown)
- `advice` - –ú–∞—Å—Å–∏–≤ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏—Ö —Å–æ–≤–µ—Ç–æ–≤ (3-5 —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π)
- `questions` - –í–æ–ø—Ä–æ—Å—ã –¥–ª—è —Ä–µ—Ñ–ª–µ–∫—Å–∏–∏ (3-4 –≤–æ–ø—Ä–æ—Å–∞)
- `symbol_names` - –ú–∞—Å—Å–∏–≤ –Ω–∞–∑–≤–∞–Ω–∏–π –∫–ª—é—á–µ–≤—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤ (3-5 —Å–∏–º–≤–æ–ª–æ–≤)

**–ü—Ä–æ–º–ø—Ç:**

–ü—Ä–æ–º–ø—Ç –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –≤ BaseProvider –∏–ª–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º –ø—Ä–æ–≤–∞–π–¥–µ—Ä–µ —Å —É—á—ë—Ç–æ–º –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –º–µ—Ç–æ–¥–∞ –ø—Å–∏—Ö–æ–∞–Ω–∞–ª–∏–∑–∞:

```typescript
protected buildPrompt(dreamData: DreamData): string {
  const methodPrompts = {
    jungian: '–ò—Å–ø–æ–ª—å–∑—É–π –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫—É—é –ø—Å–∏—Ö–æ–ª–æ–≥–∏—é –ö–∞—Ä–ª–∞ –Æ–Ω–≥–∞...',
    freudian: '–ò—Å–ø–æ–ª—å–∑—É–π –ø—Å–∏—Ö–æ–∞–Ω–∞–ª–∏–∑ –§—Ä–µ–π–¥–∞...',
    gestalt: '–ò—Å–ø–æ–ª—å–∑—É–π –ø—Ä–∏–Ω—Ü–∏–ø—ã –ì–µ—à—Ç–∞–ª—å—Ç-—Ç–µ—Ä–∞–ø–∏–∏...',
    cognitive: '–ò—Å–ø–æ–ª—å–∑—É–π –∫–æ–≥–Ω–∏—Ç–∏–≤–Ω–æ-—ç–º–ø–∏—Ä–∏—á–µ—Å–∫—É—é –º–æ–¥–µ–ª—å...',
    existential: '–ò—Å–ø–æ–ª—å–∑—É–π —ç–∫–∑–∏—Å—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥...',
    auto: '–í—ã–±–µ—Ä–∏ –Ω–∞–∏–±–æ–ª–µ–µ –ø–æ–¥—Ö–æ–¥—è—â—É—é –∫–æ–Ω—Ü–µ–ø—Ü–∏—é...'
  };

  return `
    ${methodPrompts[dreamData.method]}

    –û–ü–ò–°–ê–ù–ò–ï –°–ù–ê: ${dreamData.description}

    –ö–û–ù–¢–ï–ö–°–¢:
    - –≠–º–æ—Ü–∏—è: ${dreamData.context.emotion}
    - –ñ–∏–∑–Ω–µ–Ω–Ω–∞—è —Å–∏—Ç—É–∞—Ü–∏—è: ${dreamData.context.lifeSituation}
    - –ê—Å—Å–æ—Ü–∏–∞—Ü–∏–∏: ${dreamData.context.associations}
    - –ü–æ–≤—Ç–æ—Ä—è—é—â–∏–π—Å—è: ${dreamData.context.recurring ? '–î–∞' : '–ù–µ—Ç'}
    - –û—Å—Ç–∞—Ç–æ–∫ –¥–Ω—è: ${dreamData.context.dayResidue}
    - –ü–µ—Ä—Å–æ–Ω–∞–∂–∏: ${dreamData.context.characterType}
    - –†–æ–ª—å: ${dreamData.context.dreamRole}
    - –§–∏–∑–∏—á–µ—Å–∫–∏–µ –æ—â—É—â–µ–Ω–∏—è: ${dreamData.context.physicalSensation}

    –ó–ê–î–ê–ß–ê:
    1. –ö—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ (summary)
    2. –ì–ª—É–±–æ–∫–∏–π –∞–Ω–∞–ª–∏–∑ —Å Markdown (analysis)
    3. –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Å–æ–≤–µ—Ç—ã (advice)
    4. –í–æ–ø—Ä–æ—Å—ã –¥–ª—è —Ä–µ—Ñ–ª–µ–∫—Å–∏–∏ (questions)
    5. –ù–∞–∑–≤–∞–Ω–∏—è –∫–ª—é—á–µ–≤—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤ (symbol_names) - –¢–û–õ–¨–ö–û –ù–ê–ó–í–ê–ù–ò–Ø
  `;
}
```

#### Stage 2: –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Å–∏–º–≤–æ–ª–æ–≤ (–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ)

–î–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–∏–º–≤–æ–ª–∞ –∏–∑ `symbol_names` –¥–µ–ª–∞–µ—Ç—Å—è **–æ—Ç–¥–µ–ª—å–Ω—ã–π –∑–∞–ø—Ä–æ—Å** (–≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —á–µ—Ä–µ–∑ `Promise.all`):

**–ü—Ä–æ–º–ø—Ç –¥–ª—è —Å–∏–º–≤–æ–ª–∞:**

```typescript
const symbolPrompt = `
  –ê–ù–ê–õ–ò–ó –°–ò–ú–í–û–õ–ê: "${symbolName}"

  –ü–û–õ–ù–´–ô –ö–û–ù–¢–ï–ö–°–¢ –°–ù–ê: "${description}"
  –ñ–ò–ó–ù–ï–ù–ù–ê–Ø –°–ò–¢–£–ê–¶–ò–Ø: ${context.lifeSituation}
  –†–û–õ–¨ –í–û –°–ù–ï: ${context.dreamRole}
  –≠–ú–û–¶–ò–Ø: ${context.emotion}

  –ó–ê–î–ê–ß–ê:
  –ù–∞–ø–∏—à–∏ –ú–ê–ö–°–ò–ú–ê–õ–¨–ù–û –ü–û–î–†–û–ë–ù–û–ï —Ç–æ–ª–∫–æ–≤–∞–Ω–∏–µ —Å–∏–º–≤–æ–ª–∞ "${symbolName}"
  –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ —ç—Ç–æ–≥–æ —Å–Ω–∞ –∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è —á–µ–ª–æ–≤–µ–∫–∞.

  –¢–†–ï–ë–û–í–ê–ù–ò–Ø:
  - –Ø–∑—ã–∫: –¢–û–õ–¨–ö–û –†–£–°–°–ö–ò–ô
  - –û–±—ä—ë–º: 3-4 —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã—Ö –∞–±–∑–∞—Ü–∞ (–º–∏–Ω–∏–º—É–º 800 –∑–Ω–∞–∫–æ–≤)
  - –§–æ—Ä–º–∞—Ç: JSON { "name": "${symbolName}", "meaning": "—Ç–µ–∫—Å—Ç..." }
`;
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**

```json
{
  "name": "–ü–æ–ª—ë—Ç",
  "meaning": "–ü–æ–ª—ë—Ç –≤–æ —Å–Ω–µ ‚Äî —ç—Ç–æ –º–æ—â–Ω—ã–π –∞—Ä—Ö–µ—Ç–∏–ø–∏—á–µ—Å–∫–∏–π —Å–∏–º–≤–æ–ª, –æ—Ç—Ä–∞–∂–∞—é—â–∏–π —Å—Ç—Ä–µ–º–ª–µ–Ω–∏–µ –∫ —Å–≤–æ–±–æ–¥–µ –∏ –ø—Ä–µ–æ–¥–æ–ª–µ–Ω–∏—é –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π. –í –≤–∞—à–µ–º —Å–ª—É—á–∞–µ, —É—á–∏—Ç—ã–≤–∞—è —Å–º–µ–Ω—É —Ä–∞–±–æ—Ç—ã –∏ –æ—â—É—â–µ–Ω–∏–µ –ª—ë–≥–∫–æ—Å—Ç–∏ –ø—Ä–∏ –ø—Ä–æ–±—É–∂–¥–µ–Ω–∏–∏, —ç—Ç–æ—Ç —Å–∏–º–≤–æ–ª –º–æ–∂–µ—Ç —É–∫–∞–∑—ã–≤–∞—Ç—å –Ω–∞ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ –æ—Ç –ø—Ä–µ–∂–Ω–∏—Ö —Ä–∞–º–æ–∫ –∏ —Å—Ç—Ä–∞—Ö–æ–≤..."
}
```

### –ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ AnalysisResponse

**Type:** [types.ts](../types.ts:33-39)

```typescript
export interface AnalysisResponse {
  summary: string;              // –ö—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ
  symbolism: DreamSymbol[];     // –î–µ—Ç–∞–ª—å–Ω—ã–µ –æ–ø–∏—Å–∞–Ω–∏—è —Å–∏–º–≤–æ–ª–æ–≤
  analysis: string;             // –ì–ª—É–±–æ–∫–∏–π –∞–Ω–∞–ª–∏–∑ (Markdown)
  advice: string[];             // –ú–∞—Å—Å–∏–≤ —Å–æ–≤–µ—Ç–æ–≤
  questions: string[];          // –í–æ–ø—Ä–æ—Å—ã –¥–ª—è —Ä–µ—Ñ–ª–µ–∫—Å–∏–∏
}

export interface DreamSymbol {
  name: string;    // –ù–∞–∑–≤–∞–Ω–∏–µ —Å–∏–º–≤–æ–ª–∞
  meaning: string; // –î–µ—Ç–∞–ª—å–Ω–æ–µ —Ç–æ–ª–∫–æ–≤–∞–Ω–∏–µ
}
```

---

## üñºÔ∏è –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç:** [components/AnalysisResult.tsx](../components/AnalysisResult.tsx)

**‚ö†Ô∏è –í–ê–ñ–ù–û:** –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ **–∞–∫—Ç–∏–≤–Ω–æ–≥–æ AI –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –¥–ª—è image –∑–∞–¥–∞—á**, –∞ –ù–ï —á–µ—Ä–µ–∑ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –º–æ–¥–µ–ª—å. –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã –º–æ–≥—É—Ç –≤—ã–±—Ä–∞—Ç—å –ª—é–±–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (Gemini, OpenAI DALL-E, AiTunnel, NeuroAPI) –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏.

**–ö–Ω–æ–ø–∫–∞:** "–°–æ–∑–¥–∞—Ç—å –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—é —Å–Ω–∞"

**–ü—Ä–æ–º–ø—Ç –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:**

```typescript
const imagePrompt = `
  Create a surreal, dreamlike visualization of this dream:
  "${dreamData.description}"

  Style: Ethereal, artistic, symbolic, soft lighting, deep atmosphere,
  high quality concept art, darker tones to match midnight theme.

  Key symbols: ${analysis.symbolism.map(s => s.name).join(', ')}
`;
```

**–í—ã–∑–æ–≤:**

```typescript
const imageUrl = await aiService.generateImage(imagePrompt);
// –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: "data:image/png;base64,..."
```

**–ü—Ä–æ–≤–∞–π–¥–µ—Ä—ã –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π:**
- **Gemini:** `gemini-2.0-flash-exp` –∏–ª–∏ –¥—Ä—É–≥–∏–µ –º–æ–¥–µ–ª–∏ —Å `capabilities.image = true`
- **OpenAI:** `dall-e-2`, `dall-e-3`
- **AiTunnel/NeuroAPI:** –ü—Ä–æ–∫—Å–∏—Ä—É—é—Ç –¥–æ—Å—Ç—É–ø –∫ —Ä–∞–∑–ª–∏—á–Ω—ã–º image –º–æ–¥–µ–ª—è–º

---

## üíæ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

**–ö–Ω–æ–ø–∫–∞:** "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ –∂—É—Ä–Ω–∞–ª"

**–ß—Ç–æ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è:**

```typescript
const entry: JournalEntry = {
  id: generateId(),
  user_id: user?.id,
  timestamp: Date.now(),
  dreamData: dreamData,          // { description, context, method }
  analysis: analysisResult,       // { summary, symbolism, analysis, advice, questions }
  imageUrl: imageUrl,            // base64 data URL –∏–ª–∏ null
  notes: ''                      // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–∑–∂–µ
};
```

**–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ:**

```typescript
await supabaseStorageService.saveJournalEntry(entry);
```

**–¢–∞–±–ª–∏—Ü–∞:** `dream_entries` (—Å–º. [DATABASE.md](DATABASE.md#dream_entries))

**–¢–∞–∫–∂–µ —Å–æ–∑–¥–∞—ë—Ç—Å—è –∑–∞–ø–∏—Å—å –≤ `analysis_metadata`** –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ (–¥–∞–∂–µ –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ —Å–æ—Ö—Ä–∞–Ω–∏–ª —Å–æ–Ω):

```typescript
const metadata: AnalysisMetadata = {
  id: entry.id,
  user_id: user.id,
  timestamp: entry.timestamp,
  method: dreamData.method,
  emotion: dreamData.context.emotion,
  recurring: dreamData.context.recurring,
  symbols: analysisResult.symbolism.map(s => s.name),
  dream_description: dreamData.description.substring(0, 500),
  life_situation: dreamData.context.lifeSituation
};
```

---

## üîÑ –ü–æ–≤—Ç–æ—Ä–Ω—ã–π –∞–Ω–∞–ª–∏–∑

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç **–ø–µ—Ä–µ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å** —Å–æ–Ω —Å –¥—Ä—É–≥–∏–º –º–µ—Ç–æ–¥–æ–º –∏–∑ DreamView:

1. –û—Ç–∫—Ä—ã—Ç—å —Å–æ–Ω –∏–∑ –∂—É—Ä–Ω–∞–ª–∞ (navigateTo('dreamView'))
2. –ö–Ω–æ–ø–∫–∞ "–ü–µ—Ä–µ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å"
3. –í—ã–±—Ä–∞—Ç—å –Ω–æ–≤—ã–π –º–µ—Ç–æ–¥
4. Wizard –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Å —à–∞–≥–∞ 3 (MethodSelector) —Å —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–º–∏ description –∏ context

---

## üìö –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- [AI_PROVIDERS.md](AI_PROVIDERS.md) - –°–∏—Å—Ç–µ–º–∞ AI –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
- [STORAGE.md](STORAGE.md) - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –∂—É—Ä–Ω–∞–ª
- [DATABASE.md](DATABASE.md) - –¢–∞–±–ª–∏—Ü—ã dream_entries –∏ analysis_metadata
- [ARCHITECTURE.md](ARCHITECTURE.md) - Wizard flow –≤ App.tsx
- [CLAUDE.md](../CLAUDE.md) - –ì–ª–∞–≤–Ω—ã–π –∏–Ω–¥–µ–∫—Å
